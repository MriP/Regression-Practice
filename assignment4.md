
# Determine if a country's democratic and free nature is affected by the urban rate, employment rate and income per person.

## Data

Data for this study comes from the Gapminder World Dataset collected by the Gapminder Foundation. The Gapminder World Dataset contains data collected from more than 200 countries/areas for more 500 variables.


## Description of Variables

Below is the description of the variables

1. **Democracy Score** (variable code: polityscore, Unit: Scale -10 being lowest, 10 highest) - Score from -10 to 10.
2. **Employment Rate** (variable code: employrate, Unit: Percentage) - Employed adults (age > 15) as a percentage of the total population
3. **Income per Person** (variable code: incomeperperson, Unit: Currency USD) - Per capita income measured in constant USD (year 2000) with the inflation taken into account.
4. **Urban Rate** (variable code: urbanrate, Unit: Percentage) - Percentage of population living in urban areas.

**Democracy Score** is the response variable and **Income per Person** is the primary explantory variables.

### Import the libraries and loading the data into a pandas dataframe


    import numpy as np
    import pandas as pd
    import statsmodels.api as sm
    import statsmodels.formula.api as smf
    import seaborn as seaborn
    import pylab
    
    # bug fix for display formats to avoid run time errors
    pd.set_option('display.float_format', lambda x:'%.3f'%x)
    
    # Loading the data 
    data = pd.read_csv('gapminder.csv')
    
    

### Converting variables to numeric


    # convert variables to numeric format using convert_objects function
    data['polityscore'] = pd.to_numeric(data['polityscore'], errors='coerce')
    data['employrate'] = pd.to_numeric(data['employrate'], errors='coerce')
    data['incomeperperson'] = pd.to_numeric(data['incomeperperson'], errors='coerce')
    data['urbanrate'] = pd.to_numeric(data['urbanrate'], errors='coerce')

### First few observations of the dataset


    data.head()




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>incomeperperson</th>
      <th>alcconsumption</th>
      <th>armedforcesrate</th>
      <th>breastcancerper100th</th>
      <th>co2emissions</th>
      <th>femaleemployrate</th>
      <th>hivrate</th>
      <th>internetuserate</th>
      <th>lifeexpectancy</th>
      <th>oilperperson</th>
      <th>polityscore</th>
      <th>relectricperperson</th>
      <th>suicideper100th</th>
      <th>employrate</th>
      <th>urbanrate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Afghanistan</td>
      <td>nan</td>
      <td>.03</td>
      <td>.5696534</td>
      <td>26.8</td>
      <td>75944000</td>
      <td>25.6000003814697</td>
      <td></td>
      <td>3.65412162280064</td>
      <td>48.673</td>
      <td></td>
      <td>0.000</td>
      <td></td>
      <td>6.68438529968262</td>
      <td>55.700</td>
      <td>24.040</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Albania</td>
      <td>1914.997</td>
      <td>7.29</td>
      <td>1.0247361</td>
      <td>57.4</td>
      <td>223747333.333333</td>
      <td>42.0999984741211</td>
      <td></td>
      <td>44.9899469578783</td>
      <td>76.918</td>
      <td></td>
      <td>9.000</td>
      <td>636.341383366604</td>
      <td>7.69932985305786</td>
      <td>51.400</td>
      <td>46.720</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Algeria</td>
      <td>2231.993</td>
      <td>.69</td>
      <td>2.306817</td>
      <td>23.5</td>
      <td>2932108666.66667</td>
      <td>31.7000007629394</td>
      <td>.1</td>
      <td>12.5000733055148</td>
      <td>73.131</td>
      <td>.42009452521537</td>
      <td>2.000</td>
      <td>590.509814347428</td>
      <td>4.8487696647644</td>
      <td>50.500</td>
      <td>65.220</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Andorra</td>
      <td>21943.340</td>
      <td>10.17</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>81</td>
      <td></td>
      <td></td>
      <td>nan</td>
      <td></td>
      <td>5.36217880249023</td>
      <td>nan</td>
      <td>88.920</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Angola</td>
      <td>1381.004</td>
      <td>5.57</td>
      <td>1.4613288</td>
      <td>23.1</td>
      <td>248358000</td>
      <td>69.4000015258789</td>
      <td>2</td>
      <td>9.99995388324075</td>
      <td>51.093</td>
      <td></td>
      <td>-2.000</td>
      <td>172.999227388199</td>
      <td>14.5546770095825</td>
      <td>75.700</td>
      <td>56.700</td>
    </tr>
  </tbody>
</table>
</div>



### Centering the explantory variables


    # Creating a new columns which are centered
    # Generated by subtracting the mean from the column variables.
    data['centered_employrate'] = data['employrate'] - data['employrate'].mean()
    data['centered_incomeperperson'] = data['incomeperperson'] - data['incomeperperson'].mean()
    data['centered_urbanrate'] = data['urbanrate'] - data['urbanrate'].mean()

## Binning the response variable

Since the response variable (**Democracy Score**) is quantitative, you will bin it into two categories.

For democracy score less than equal to 0 i.e from -10 to 0, it will be categorized as 0.
For democracy score greater than 1 i.e from 1 to 10, it will be categorized as 1.


    def categorize_dem_score(x):
        if x['polityscore'] <= 0:
            return 0
        else:
            return 1
        
    data['bin_polityscore'] = data.apply(lambda x: categorize_dem_score(x), axis =1)
    data_complete = data[['bin_polityscore','centered_employrate','centered_incomeperperson','centered_urbanrate']].dropna()

### View of the data now


    data_complete.head()




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bin_polityscore</th>
      <th>centered_employrate</th>
      <th>centered_incomeperperson</th>
      <th>centered_urbanrate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>-7.236</td>
      <td>-6825.970</td>
      <td>-10.049</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>-8.136</td>
      <td>-6508.973</td>
      <td>8.451</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>17.064</td>
      <td>-7359.962</td>
      <td>-0.069</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>-0.236</td>
      <td>2008.453</td>
      <td>35.231</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1</td>
      <td>-18.536</td>
      <td>-7414.224</td>
      <td>7.091</td>
    </tr>
  </tbody>
</table>
</div>



### Generating the Logistic Regression Model


    logistic_reg_model_A = smf.logit(formula='bin_polityscore ~ centered_incomeperperson', data=data_complete).fit()
    print (logistic_reg_model_A.summary())
    

    Optimization terminated successfully.
             Current function value: 0.569182
             Iterations 6
                               Logit Regression Results                           
    ==============================================================================
    Dep. Variable:        bin_polityscore   No. Observations:                  166
    Model:                          Logit   Df Residuals:                      164
    Method:                           MLE   Df Model:                            1
    Date:                Sun, 03 Jul 2016   Pseudo R-squ.:                 0.04482
    Time:                        14:06:03   Log-Likelihood:                -94.484
    converged:                       True   LL-Null:                       -98.917
                                            LLR p-value:                  0.002905
    ============================================================================================
                                   coef    std err          z      P>|z|      [95.0% Conf. Int.]
    --------------------------------------------------------------------------------------------
    Intercept                    1.0949      0.203      5.394      0.000         0.697     1.493
    centered_incomeperperson  6.126e-05   2.44e-05      2.507      0.012      1.34e-05     0.000
    ============================================================================================
    

As can be seen from above, the p-value (0.012) is less than 0.05 and has positive coefficients. 

Thus **Income per Person** is positively and significant associated with the **Democracy Score**.

### Adding Employment Rate


    logistic_reg_model_B = smf.logit(formula='bin_polityscore ~ centered_incomeperperson + centered_employrate', data=data_complete).fit()
    print (logistic_reg_model_B.summary())
    

    Optimization terminated successfully.
             Current function value: 0.564191
             Iterations 6
                               Logit Regression Results                           
    ==============================================================================
    Dep. Variable:        bin_polityscore   No. Observations:                  166
    Model:                          Logit   Df Residuals:                      163
    Method:                           MLE   Df Model:                            2
    Date:                Sun, 03 Jul 2016   Pseudo R-squ.:                 0.05319
    Time:                        14:06:03   Log-Likelihood:                -93.656
    converged:                       True   LL-Null:                       -98.917
                                            LLR p-value:                  0.005186
    ============================================================================================
                                   coef    std err          z      P>|z|      [95.0% Conf. Int.]
    --------------------------------------------------------------------------------------------
    Intercept                    1.1000      0.201      5.463      0.000         0.705     1.495
    centered_incomeperperson  5.841e-05   2.37e-05      2.464      0.014      1.19e-05     0.000
    centered_employrate         -0.0214      0.017     -1.279      0.201        -0.054     0.011
    ============================================================================================
    

Employment Rate has a non-significant P value (0.201 > 0.05), but it doesn't confound the relationship between 
Democracy Score and Income Per Person. Employment Rate is not significantly associated with Democracy Score.

### Adding Urban Rate


    logistic_reg_model_C = smf.logit(formula='bin_polityscore ~ centered_incomeperperson + centered_employrate + centered_urbanrate', data=data_complete).fit()
    print (logistic_reg_model_C.summary())

    Optimization terminated successfully.
             Current function value: 0.563664
             Iterations 6
                               Logit Regression Results                           
    ==============================================================================
    Dep. Variable:        bin_polityscore   No. Observations:                  166
    Model:                          Logit   Df Residuals:                      162
    Method:                           MLE   Df Model:                            3
    Date:                Sun, 03 Jul 2016   Pseudo R-squ.:                 0.05408
    Time:                        14:06:03   Log-Likelihood:                -93.568
    converged:                       True   LL-Null:                       -98.917
                                            LLR p-value:                   0.01347
    ============================================================================================
                                   coef    std err          z      P>|z|      [95.0% Conf. Int.]
    --------------------------------------------------------------------------------------------
    Intercept                    1.1138      0.206      5.414      0.000         0.711     1.517
    centered_incomeperperson   6.59e-05   3.01e-05      2.186      0.029      6.81e-06     0.000
    centered_employrate         -0.0248      0.019     -1.329      0.184        -0.061     0.012
    centered_urbanrate          -0.0046      0.011     -0.417      0.676        -0.026     0.017
    ============================================================================================
    

Urban Rate has a non-significant P value (0.675 > 0.05), but it doesn't confound the relationship between 
Democracy Score and Income Per Person. Urban Rate is not significantly associated with Democracy Score.


We choose Logistic Regression Model A (logistic_reg_model_A) as the appropriate model.

## Odds Ratio


    params = logistic_reg_model_A.params
    conf_int = logistic_reg_model_A.conf_int()
    conf_int['Odds Ratio'] = params
    conf_int.columns = ['Lower CI', 'Upper CI', 'Odds Ratio']
    print(np.exp(conf_int))

                              Lower CI  Upper CI  Odds Ratio
    Intercept                    2.008     4.449       2.989
    centered_incomeperperson     1.000     1.000       1.000
    

Since the **Odds Ratio** is 1, the model is statistically not significant. There is no difference between the high democracy score or low democracy score for values of income per person.


    
